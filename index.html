<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Activity</title>
  <!-- Include Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
  <h1>Employee Activity</h1>
  <div id="activityData"></div>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCoQdtouhudYD7VM5vTct5QTs1c3lgUhFI",
      authDomain: "lagnuvoservice-f651e.firebaseapp.com",
      databaseURL: "https://lagnuvoservice-f651e-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "lagnuvoservice-f651e",
      storageBucket: "lagnuvoservice-f651e.firebasestorage.app",
      messagingSenderId: "801285748748",
      appId: "1:801285748748:android:9ef76514005073a1071629"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Function to fetch and display activity data
    function fetchActivityData() {
      const activityRef = database.ref('activity'); // Reference to the 'activity' node

      activityRef.once('value', (snapshot) => {
        const activityData = snapshot.val();
        const activityDiv = document.getElementById('activityData');

        if (activityData) {
          let html = '<h2>Activity Data</h2>';
          for (const empCode in activityData) {
            html += `<h3>Employee: ${empCode}</h3>`;
            for (const activityId in activityData[empCode]) {
              const activity = activityData[empCode][activityId];
              html += `
                <div>
                  <p><strong>Check-in Time:</strong> ${activity.checkInTime}</p>
                  <p><strong>Check-out Time:</strong> ${activity.checkOutTime}</p>
                  <p><strong>Distance:</strong> ${activity.distance}</p>
                  <p><strong>Ticket Number:</strong> ${activity.ticketNumber}</p>
                  <p><strong>Query Data:</strong> ${activity.queryData || 'N/A'}</p>
                  <hr>
                </div>
              `;
            }
          }
          activityDiv.innerHTML = html;
        } else {
          activityDiv.innerHTML = '<p>No activity data found.</p>';
        }
      }).catch((error) => {
        console.error('Error fetching data:', error);
        document.getElementById('activityData').innerHTML = '<p>Error loading data. Please try again.</p>';
      });
    }

    // Fetch data when the page loads
    fetchActivityData();
  </script>
</body>
</html>
